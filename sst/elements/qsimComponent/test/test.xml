<?xml version="1.0"?>
<sdl version="2.0"/>

<sst>

    <!-- qsimComponent needs memHierarchy to be loaded before it.  Put the memory first. -->

  <component name="chiprtr" rank="0" type="merlin.hr_router">
    <params>
      <num_ports>5</num_ports>
      <num_vcs>3</num_vcs>
      <link_bw>5GHz</link_bw>
      <xbar_bw>5GHz</xbar_bw>
      <topology>merlin.singlerouter</topology>
      <id>0</id>
    </params>
    <link name=dir_net_0 port=port0 latency=5ns />
    <link name=cache_net_0 port=port1 latency=5ns />
    <link name=cache_net_1 port=port2 latency=5ns />
    <link name=cache_net_2 port=port3 latency=5ns />
    <link name=cache_net_3 port=port4 latency=5ns />
  </component>

  <component name="dirctrl0" rank="0"type="memHierarchy.DirectoryController">
    <params>
      <coherence_protocol>MSI</coherence_protocol>
      <network_bw>5GHz</network_bw>
      <network_address>0</network_address>
      <addr_range_start>0x0</addr_range_start>
      <addr_range_end>0xe8000000</addr_range_end>
      <backingStoreSize>0</backingStoreSize>
    </params>
    <link name=dir_mem_link_0 port=memory latency=10ns />
    <link name=dir_net_0 port=network latency=5ns />
  </component>

  <component name="memory0" rank="0" type="memHierarchy.MemController">
    <params>
      <coherence_protocol>MSI</coherence_protocol>
      <access_time>50ns</access_time>
      <mem_size>4096</mem_size>
      <clock>1GHz</clock>
    </params>
    <link name=dir_mem_link_0 port=direct_link latency=10ns />
  </component>

  <!--<><><><><><><><><><><><><><>-<><><><><><><><><><><><><><>-->

  <component name="cpu0" rank="0" type="qsimComponent">
    <params>
      <state>/home/jpvandy/CentOS-bamboo-Apr03_1611/devel/trunk/sst/elements/qsimComponent/test/state.4</state>
      <app>/home/jpvandy/CentOS-bamboo-Apr03_1611/devel/trunk/sst/elements/qsimComponent/test/test-app.tar</app>
      <hwthread>0</hwthread>
    </params>
    <link name=c0_l1cache_link port=memLink latency=100ps />
    <link name=ipi_ring_0_1 port=ipiRingOut latency=10ns />
    <link name=ipi_ring_3_0 port=ipiRingIn latency=10ns />
  </component>

  <component name="cpu1" rank="1" type="qsimComponent">
    <params>
      <state>/home/jpvandy/CentOS-bamboo-Apr03_1611/devel/trunk/sst/elements/qsimComponent/test/state.4</state>
      <app>/home/jpvandy/CentOS-bamboo-Apr03_1611/devel/trunk/sst/elements/qsimComponent/test/test-app.tar</app>
      <hwthread>1</hwthread>
    </params>
    <link name=c1_l1cache_link port=memLink latency=100ps />
    <link name=ipi_ring_1_2 port=ipiRingOut latency=10ns />
    <link name=ipi_ring_0_1 port=ipiRingIn latency=10ns />
  </component>

  <component name="cpu2" rank="2" type="qsimComponent">
    <params>
      <state>/home/jpvandy/CentOS-bamboo-Apr03_1611/devel/trunk/sst/elements/qsimComponent/test/state.4</state>
      <app>/home/jpvandy/CentOS-bamboo-Apr03_1611/devel/trunk/sst/elements/qsimComponent/test/test-app.tar</app>
      <hwthread>2</hwthread>
    </params>
    <link name=c2_l1cache_link port=memLink latency=100ps />
    <link name=ipi_ring_2_3 port=ipiRingOut latency=10ns />
    <link name=ipi_ring_1_2 port=ipiRingIn latency=10ns />
  </component>

  <component name="cpu3" rank="3" type="qsimComponent">
    <params>
      <state>/home/jpvandy/CentOS-bamboo-Apr03_1611/devel/trunk/sst/elements/qsimComponent/test/state.4</state>
      <app>/home/jpvandy/CentOS-bamboo-Apr03_1611/devel/trunk/sst/elements/qsimComponent/test/test-app.tar</app>
      <hwthread>3</hwthread>
    </params>
    <link name=c3_l1cache_link port=memLink latency=100ps />
    <link name=ipi_ring_3_0 port=ipiRingOut latency=10ns />
    <link name=ipi_ring_2_3 port=ipiRingIn latency=10ns />
  </component>

  <!--<><><><><><><><><><><><><><>-<><><><><><><><><><><><><><>-->

  <component name="c0.l1cache" rank="0" type="memHierarchy.Cache">
    <params>
      <coherence_protocol>MSI</coherence_protocol>
      <cache_frequency>1GHz</cache_frequency>
      <replacement_policy> LRU </replacement_policy>
      <associativity>4</associativity>
      <cache_size>8 KB</cache_size>
      <cache_line_size>64</cache_line_size>
      <access_latency_cycles>1</access_latency_cycles>
      <low_network_links> 1 </low_network_links>
      <L1>1</L1>
      <statistics>1</statistics>
    </params>
    <link name=c0_l1cache_link port=high_network_0 latency=100ps />
    <link name=c0_l1l2cache_link port=low_network_0 latency=10ns />
  </component>

  <component name="c1.l1cache" rank="1" type="memHierarchy.Cache">
    <params>
      <coherence_protocol>MSI</coherence_protocol>
      <cache_frequency>1GHz</cache_frequency>
      <replacement_policy> LRU </replacement_policy>
      <associativity>4</associativity>
      <cache_size>8 KB</cache_size>
      <cache_line_size>64</cache_line_size>
      <access_latency_cycles>1</access_latency_cycles>
      <low_network_links> 1 </low_network_links>
      <L1>1</L1>
      <statistics>1</statistics>
    </params>
    <link name=c1_l1cache_link port=high_network_0 latency=100ps />
    <link name=c1_l1l2cache_link port=low_network_0 latency=10ns />
  </component>

  <component name="c2.l1cache" rank="2" type="memHierarchy.Cache">
    <params>
      <coherence_protocol>MSI</coherence_protocol>
      <cache_frequency>1GHz</cache_frequency>
      <replacement_policy> LRU </replacement_policy>
      <associativity>4</associativity>
      <cache_size>8 KB</cache_size>
      <cache_line_size>64</cache_line_size>
      <access_latency_cycles>1</access_latency_cycles>
      <low_network_links> 1 </low_network_links>
      <L1>1</L1>
      <statistics>1</statistics>
    </params>
    <link name=c2_l1cache_link port=high_network_0 latency=100ps />
    <link name=c2_l1l2cache_link port=low_network_0 latency=10ns />
  </component>

  <component name="c3.l1cache" rank="3" type="memHierarchy.Cache">
    <params>
      <coherence_protocol>MSI</coherence_protocol>
      <cache_frequency>1GHz</cache_frequency>
      <replacement_policy> LRU </replacement_policy>
      <associativity>4</associativity>
      <cache_size>8 KB</cache_size>
      <cache_line_size>64</cache_line_size>
      <access_latency_cycles>1</access_latency_cycles>
      <low_network_links> 1 </low_network_links>
      <L1>1</L1>
      <statistics>1</statistics>
    </params>
    <link name=c3_l1cache_link port=high_network_0 latency=100ps />
    <link name=c3_l1l2cache_link port=low_network_0 latency=10ns />
  </component>

  <!--<><><><><><><><><><><><><><>-<><><><><><><><><><><><><><>-->

  <component name="c0.l2cache" rank="0" type="memHierarchy.Cache">
    <params>
      <coherence_protocol>MSI</coherence_protocol>
      <cache_frequency>1GHz</cache_frequency>
      <replacement_policy> LRU </replacement_policy>
      <associativity>16</associativity>
      <cache_size>64 KB</cache_size>
      <cache_line_size>64</cache_line_size>
      <access_latency_cycles>10</access_latency_cycles>
      <high_network_links> 1 </high_network_links>
      <L1>0</L1>
      <directory_at_next_level> 1 </directory_at_next_level>
      <network_address>1</network_address>
      <mode>INCLUSIVE</mode>
      <printStats>1</printStats>
    </params>
    <link name=c0_l1l2cache_link port=high_network_0 latency=100ps />
    <link name=cache_net_0 port=directory latency=10ns />
  </component>

  <component name="c1.l2cache" rank="1" type="memHierarchy.Cache">
    <params>
      <coherence_protocol>MSI</coherence_protocol>
      <cache_frequency>1GHz</cache_frequency>
      <replacement_policy> LRU </replacement_policy>
      <associativity>16</associativity>
      <cache_size>64 KB</cache_size>
      <cache_line_size>64</cache_line_size>
      <access_latency_cycles>10</access_latency_cycles>
      <high_network_links> 1 </high_network_links>
      <L1>0</L1>
      <directory_at_next_level> 1 </directory_at_next_level>
      <network_address>2</network_address>
      <mode>INCLUSIVE</mode>
      <printStats>1</printStats>
    </params>
    <link name=c1_l1l2cache_link port=high_network_0 latency=100ps />
    <link name=cache_net_1 port=directory latency=10ns />
  </component>

  <component name="c2.l2cache" rank="2" type="memHierarchy.Cache">
    <params>
      <coherence_protocol>MSI</coherence_protocol>
      <cache_frequency>1GHz</cache_frequency>
      <replacement_policy> LRU </replacement_policy>
      <associativity>16</associativity>
      <cache_size>64 KB</cache_size>
      <cache_line_size>64</cache_line_size>
      <access_latency_cycles>10</access_latency_cycles>
      <high_network_links> 1 </high_network_links>
      <L1>0</L1>
      <directory_at_next_level> 1 </directory_at_next_level>
      <network_address>3</network_address>
      <mode>INCLUSIVE</mode>
      <printStats>1</printStats>
    </params>
    <link name=c2_l1l2cache_link port=high_network_0 latency=100ps />
    <link name=cache_net_2 port=directory latency=10ns />
  </component>

  <component name="c3.l2cache" rank="3" type="memHierarchy.Cache">
    <params>
      <coherence_protocol>MSI</coherence_protocol>
      <cache_frequency>1GHz</cache_frequency>
      <replacement_policy> LRU </replacement_policy>
      <associativity>16</associativity>
      <cache_size>64 KB</cache_size>
      <cache_line_size>64</cache_line_size>
      <access_latency_cycles>10</access_latency_cycles>
      <high_network_links> 1 </high_network_links>
      <L1>0</L1>
      <directory_at_next_level> 1 </directory_at_next_level>
      <network_address>4</network_address>
      <mode>INCLUSIVE</mode>
      <printStats>1</printStats>
    </params>
    <link name=c3_l1l2cache_link port=high_network_0 latency=100ps />
    <link name=cache_net_3 port=directory latency=10ns />
  </component>

</sst>
