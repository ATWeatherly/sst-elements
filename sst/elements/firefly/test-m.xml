<?xml version="1.0"?>
<sdl version="2.0"/>

<config>
  run-mode=both
</config>

<param_include>
  <rtr_params>
     <debug> 0 </debug>
    <num_ports> 3 </num_ports>
    <num_vcs> 2 </num_vcs>
    <link_bw> 2Ghz </link_bw>
    <xbar_bw> 2Ghz </xbar_bw>
    <topology> merlin.torus </topology>
    <torus:shape> 2 </torus:shape>
    <torus:width> 1 </torus:width>
    <torus:local_ports> 1 </torus:local_ports>

  </rtr_params>

  <driverParams>
     <debug> 1 </debug>
     <verboseLevel> 1 </verboseLevel>
     <bufLen> 2 </bufLen>
     <hermesModule> firefly.hades </hermesModule>
     <traceFile> prepostedTrace.out </traceFile>
     <sharedTraceFile> 0 </sharedTraceFile>
     <hermesParams.debug> 1 </hermesParams.debug>
     <hermesParams.verboseLevel> 3 </hermesParams.verboseLevel>
     <hermesParams.numRanks> 2 </hermesParams.numRanks>
     <hermesParams.nidListFile> nidlist.txt </hermesParams.nidListFile>
     <hermesParams.nicModule> firefly.nic </hermesParams.nicModule>
     <hermesParams.policy> adjacent </hermesParams.policy>

     <hermesParams.functionSM.defaultDebug> 1 </hermesParams.functionSM.defaultDebug>
     <hermesParams.functionSM.defaultVerbose> 1 </hermesParams.functionSM.defaultVerbose>
     <hermesParams.functionSM.Allgather.debug> 0 </hermesParams.functionSM.Allgather.debug>
     <hermesParams.functionSM.Allgather.verbose> 1 </hermesParams.functionSM.Allgather.verbose>

     <hermesParams.ctrlMsg.debug> 0 </hermesParams.ctrlMsg.debug>
     <hermesParams.ctrlMsg.verboseLevel> 1 </hermesParams.ctrlMsg.verboseLevel>

     <hermesParams.longMsgProtocol.debug> 0 </hermesParams.longMsgProtocol.debug>
     <hermesParams.longMsgProtocol.verboseLevel> 1 </hermesParams.longMsgProtocol.verboseLevel>

     <hermesParams.nodeParams.numCores> 1 </hermesParams.nodeParams.numCores>
     <hermesParams.nodeParams.coreNum> 0 </hermesParams.nodeParams.coreNum>

  </driverParams>

  <nicParams>
     <hermesParams.nicParams.debug> 0 </hermesParams.nicParams.debug>
     <hermesParams.nicParams.verboseLevel> 1 </hermesParams.nicParams.verboseLevel>
     <hermesParams.nicParams.module> merlin.linkcontrol </hermesParams.nicParams.module>
     <hermesParams.nicParams.topology> merlin.torus </hermesParams.nicParams.topology>
     <hermesParams.nicParams.num_vcs> 2 </hermesParams.nicParams.num_vcs>
     <hermesParams.nicParams.link_bw> 2Ghz </hermesParams.nicParams.link_bw>

     <hermesParams.nicParams.txBusDelay_ns> 150  </hermesParams.nicParams.txBusDelay_ns>
     <hermesParams.nicParams.rxBusDelay_ns> 150  </hermesParams.nicParams.rxBusDelay_ns>
     <hermesParams.nicParams.rxMatchDelay_ns> 100  </hermesParams.nicParams.rxMatchDelay_ns>
     <hermesParams.nicParams.txDelay_ns> 50 </hermesParams.nicParams.txDelay_ns>

  </nicParams>


</param_include>

<sst>

    <component name="0.driver" type=firefly.testDriver >
        <params include=driverParams,nicParams>
            <hermesParams.nicParams.nid> 0 </hermesParams.nicParams.nid>
        </params>
        <link name=nic0 port=rtr latency=1ns />
    </component>

    <component name="1.driver" type=firefly.testDriver >
        <params include=driverParams,nicParams>
            <hermesParams.nicParams.nid> 1 </hermesParams.nicParams.nid>
        </params>
        <link name=nic1 port=rtr latency=1ns />
    </component>

    <component name=0.rtr type=merlin.hr_router >
        <params include=rtr_params>
            <id> 0 </id>
        </params>
        <link name=link_0_1 port=port0 latency=10ns/>
        <link name=link_1_0 port=port1 latency=10ns/>
        <link name=nic0 port=port2 latency=10ns/>
    </component>

    <component name=1.rtr type=merlin.hr_router >
        <params include=rtr_params>
            <id> 1 </id>
        </params>
        <link name=link_1_0 port=port0 latency=10ns/>
        <link name=link_0_1 port=port1 latency=10ns/>
        <link name=nic1 port=port2 latency=10ns/>
    </component>

</sst>
