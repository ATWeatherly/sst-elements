<?xml version="1.0"?>
<sdl version="2.0"/>
<timebase>1ns</timebase>
<config>
 stopAtCycle=5000ns
</config>

<variables>
	<lat> 1ns </lat>
	<buslat> 1ns </buslat>
</variables>


<sst>
	<component name="cpu0" type="memHierarchy.trivialCPU">
		<params>
			<workPerCycle> 1000 </workPerCycle>
			<commFreq> 100 </commFreq>
			<memSize> 0x100 </memSize>
			<do_write> 1 </do_write>
		</params>
		<link name=cpu0_l1cache_link port=mem_link latency=$lat />
	</component>

	<component name="c0.l1cache" type="memHierarchy.Cache">
		<params>
			<num_ways> 4 </num_ways>
			<num_rows> 16 </num_rows>
			<blocksize> 32 </blocksize>
			<access_time> 10 ns </access_time>
			<next_level> l2cache </next_level>
			<num_upstream> 1 </num_upstream>
		</params>
		<link name=cpu0_l1cache_link port=upstream0 latency=$lat />
		<link name=c0.l1cache_bus_link port=snoop_link latency=$buslat />
	</component>

	<component name="cpu1" type="memHierarchy.trivialCPU">
		<params>
			<workPerCycle> 1000 </workPerCycle>
			<commFreq> 100 </commFreq>
			<memSize> 0x100 </memSize>
			<do_write> 1 </do_write>
		</params>
		<link name=cpu1_l1cache_link port=mem_link latency=$lat />
	</component>

	<component name="c1.l1cache" type="memHierarchy.Cache">
		<params>
			<num_ways> 4 </num_ways>
			<num_rows> 16 </num_rows>
			<blocksize> 32 </blocksize>
			<access_time> 10 ns </access_time>
			<next_level> l2cache </next_level>
			<num_upstream> 1 </num_upstream>
		</params>
		<link name=cpu1_l1cache_link port=upstream0 latency=$lat />
		<link name=c1.l1cache_bus_link port=snoop_link latency=$buslat />
	</component>

	<component name="l2cache" type="memHierarchy.Cache">
		<params>
			<num_ways> 8 </num_ways>
			<num_rows> 64 </num_rows>
			<blocksize> 32 </blocksize>
			<access_time> 100 ns </access_time>
		</params>
		<link name=l2cache_bus_link port=snoop_link latency=$buslat />
	</component>


	<component name="membus" type="memHierarchy.Bus">
		<params>
			<numPorts> 4 </numPorts>
			<busDelay> 20 </busDelay>
		</params>
		<link name=c0.l1cache_bus_link port=port0 latency=$buslat />
		<link name=c1.l1cache_bus_link port=port1 latency=$buslat />
		<link name=l2cache_bus_link port=port2 latency=$buslat />
		<link name=mem_bus_link port=port3 latency=$buslat />
	</component>


	<component name="memory" type="memHierarchy.trivialMem">
		<params>
			<accessTime> 1000 </accessTime>
			<memSize> 0xffffff </memSize>
		</params>
		<link name=mem_bus_link port=bus_link latency=$buslat />
	</component>

</sst>
