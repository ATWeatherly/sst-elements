<!--
Topology:
            Core
             L1
             L2
             L3
        SimpleMemory
 
Noncacheable Requests
-->

<?xml version="1.0"?>
<sdl version="2.0"/>
<timebase>1ns</timebase>

<variables>
	<lat> 1ns </lat>
	<buslat> 10ns </buslat>
</variables>

<config>
    stopAtCycle=200000ns
</config>

<param_include>
    <cpuParams>
        <workPerCycle> 1000 </workPerCycle>
        <commFreq> 100 </commFreq>
        <memSize> 0x100000 </memSize>
        <do_write> 1 </do_write>
        <num_loadstore> 10000 </num_loadstore>
        <noncacheableRangeStart> 0  </noncacheableRangeStart>
        <noncacheableRangeEnd> 0x100  </noncacheableRangeEnd>
    </cpuParams>
    <l1Params>
        <cache_frequency> 2 Ghz  </cache_frequency>
        <cache_size> 4 KB </cache_size>
        <coherence_protocol> MSI </coherence_protocol>
        <replacement_policy> lru </replacement_policy> 
        <associativity> 4 </associativity>
        <access_latency_cycles> 5  </access_latency_cycles>
        <cache_line_size> 64 </cache_line_size>
        <L1> 1 </L1>
        <debug> ${MEM_DEBUG} </debug>
        <debug_level> 8 </debug_level>
        <statistics> 1 </statistics>
    </l1Params>
    <l2Params>
        <cache_frequency> 2 Ghz  </cache_frequency>
        <cache_size> 32 KB </cache_size>
        <coherence_protocol> MSI </coherence_protocol>
        <replacement_policy> lru </replacement_policy> 
        <associativity> 8 </associativity>
        <access_latency_cycles> 20  </access_latency_cycles>
        <cache_line_size> 64 </cache_line_size>
        <debug> ${MEM_DEBUG} </debug>
        <debug_level> 8 </debug_level>
        <statistics> 1 </statistics>
    </l2Params>
    <l3Params>
        <cache_frequency> 2 Ghz  </cache_frequency>
        <cache_size> 64 KB </cache_size>
        <coherence_protocol> MSI </coherence_protocol>
        <replacement_policy> lru </replacement_policy> 
        <associativity> 16 </associativity>
        <access_latency_cycles> 100  </access_latency_cycles>
        <cache_line_size> 64 </cache_line_size>
        <debug> 1 </debug>
        <debug_level> 8 </debug_level>
        <statistics> 1 </statistics>
    </l3Params>
    
    <memParams>
        <coherence_protocol> MSI </coherence_protocol>
        <access_time> 100 ns </access_time>
        <mem_size> 512 </mem_size>
        <clock> 1GHz </clock>
        <debug> ${MEM_DEBUG} </debug>
	</memParams>
    
</param_include>

<sst>
	<component name="cpu" type="memHierarchy.trivialCPU">
        <params include=cpuParams />
		<link name=cpu_l1cache_link port=mem_link latency=$lat />
	</component>

	<component name="l1cache" type="memHierarchy.Cache">
        <params include=l1Params />
		<link name=cpu_l1cache_link port=high_network_0 latency=$lat />
		<link name=l1cache_l2cache_link port=low_network_0 latency=$buslat />
	</component>

    <component name="l2cache" type="memHierarchy.Cache">
        <params include=l2Params />
        <link name=l1cache_l2cache_link port=high_network_0 latency=$buslat />
		<link name=l2cache_l3cache_link port=low_network_0 latency=$buslat />
	</component>

	<component name="l3cache" type="memHierarchy.Cache">
        <params include=l3Params />
		<link name=l2cache_l3cache_link port=high_network_0 latency=$buslat />
		<link name=mem_bus_link port=low_network_0 latency=$buslat />
	</component>

	<component name="memory" type="memHierarchy.MemController">
        <params include=memParams />
		<link name=mem_bus_link port=direct_link latency=$buslat />
	</component>

</sst>


<param_include>
    <cpuParams>
        <workPerCycle> 1000 </workPerCycle>
        <commFreq> 100 </commFreq>
        <memSize> 0x1000 </memSize>
        <do_write> 1 </do_write>
        <num_loadstore> 1000 </num_loadstore>
        <noncacheableRangeStart> 0x0000 </noncacheableRangeStart>
        <noncacheableRangeEnd> 0x0100 </noncacheableRangeEnd>
    </cpuParams>
    <l1Params>
        <cache_frequency> 2 Ghz  </cache_frequency>
        <cache_size> 4 KB </cache_size>
        <coherence_protocol> MSI </coherence_protocol>
        <replacement_policy> lru </replacement_policy> 
        <associativity> 4 </associativity>
        <access_latency_cycles> 4  </access_latency_cycles>
        <cache_line_size> 64 </cache_line_size>
        <L1> 1 </L1>
        <debug> ${MEM_DEBUG} </debug>
        <debug_level> 8 </debug_level>
        <statistics> 1 </statistics>
    </l1Params>
    <l2Params>
        <cache_frequency> 2 Ghz  </cache_frequency>
        <cache_size> 16 KB </cache_size>
        <coherence_protocol> MSI </coherence_protocol>
        <replacement_policy> lru </replacement_policy> 
        <associativity> 8 </associativity>
        <access_latency_cycles> 10  </access_latency_cycles>
        <cache_line_size> 64 </cache_line_size>
        <debug> ${MEM_DEBUG} </debug>
        <debug_level> 8 </debug_level>
        <statistics> 1 </statistics>
    </l2Params>
    <memParams>
        <coherence_protocol> MSI </coherence_protocol>
        <access_time> 1000 ns </access_time>
        <mem_size> 512 </mem_size>
        <clock> 1GHz </clock>
        <debug> ${MEM_DEBUG} </debug>
	</memParams>
</param_include>

<sst>
	<component name="cpu" type="memHierarchy.trivialCPU">
        <params include=cpuParams />
		<link name=cpu_l1cache_link port=mem_link latency=$lat />
	</component>

	<component name="l1cache" type="memHierarchy.Cache">
        <params include=l1Params />
		<link name=cpu_l1cache_link port=high_network_0 latency=$lat />
		<link name=l1cache_l2cache_link port=low_network_0 latency=$buslat />
	</component>
    
	<component name="l2cache" type="memHierarchy.Cache">
        <params include=l2Params />
		<link name=l1cache_l2cache_link port=high_network_0 latency=$lat />
		<link name=mem_bus_link port=low_network_0 latency=$buslat />
	</component>
    
	<component name="memory" type="memHierarchy.MemController">
        <params include=memParams />
		<link name=mem_bus_link port=direct_link latency=$buslat />
	</component>

</sst>
